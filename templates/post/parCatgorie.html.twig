{% extends 'base.html.twig' %}

{% block title %}Liste des posts
{% endblock %}

{% block body %}
	<div class="container">
		{% for message in app.flashes('message') %}
			<div class="alert alert-success" role="alert">
				{{ message }}
			</div>
		{% endfor %}
            <br>
            <div class="card text-center">
                <div class="card-header">
                    <h1>Bienvenue sur monBlog</h1>
                </div>
            </div>

			<br>

			<div class="row">
				<div class="col-md-3">

					<h2>Categories</h2>
					<ul class="list-group">
						{% for category in categoryn %}
							{% if category.posts|length != 0%}
								<li class="list-group-item">
									<a href="{{ path('post.listeParCategorie',{id : category.id }) }}" >{{ category.name }}</a>
									<span class="badge badge-warning">{{category.posts|length}}<span>
								</li>
							{% endif %}
						{% endfor %}
					</ul>
				</div>


						<div class="col-md-8">
							<h1>Voici les posts de la categorie {{ categorieSelect.name }}</h1>
							{% for post in posts %}

								<a href="{{ path('post.show',{slug : post.slug}) }}">
									<h2>{{ post.title }}</h2>
								</a>
								<div>{{ post.description }}</div>
								<p>Publié le
									{{ post.publishedAt|date('d/m/Y à h\\hi') }}</p>
								<div>
									{% for categorie in post.categories %}
										<span class="badge bg-secondary">{{ categorie.name }}</span>

									{%  endfor %}
								</div>
                                <br>
							{% endfor %}
							{{ knp_pagination_render(posts,'@KnpPaginator/Pagination/twitter_bootstrap_v3_pagination.html.twig') }}
						</div>


					</div>

				</div>
			{% endblock %}
